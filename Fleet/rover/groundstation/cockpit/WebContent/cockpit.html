<!DOCTYPE HTML>
<html>
	<script src="http://192.168.1.62:8090/socket.io/socket.io.js"></script>  
	<script src="/gamepad/gamepad.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
  			 
    <head>
    	<script type="text/javascript" 
    			src="https://maps.googleapis.com/maps/api/js?sensor=false">
    	</script>
       
       
   		<script src="/sap/ui5/1/resources/sap-ui-core.js"
                id="sap-ui-bootstrap"
                data-sap-ui-libs="sap.ui.ux3,sap.ui.commons,sap.viz"
                data-sap-ui-theme="sap_goldreflection" >
        </script>
                      
        <!-- add sap.ui.table,sap.ui.ux3 and/or other libraries to 'data-sap-ui-libs' if required -->
  		<script type="text/javascript" 
  				src="./cockpit_ui_resources/global.js" >
  		</script> 
   		<script>sap.ui.localResources("cockpit_ui_resources");
                var view = sap.ui.view({id:"viewCockpit", viewName:"cockpit_ui_resources.cockpit", type:sap.ui.core.mvc.ViewType.JS});
   			    view.placeAt("content");     			         
   		</script>
   			 
  
	</head>
    <body class="sapUiBody" role="application">
    	<div id="content"></div>
	 	<script type="text/javascript">
       		socket = io.connect('http://192.168.1.62:8090');
	        socket.on('connect', function(data){
	        	try { 
	        			sap.ui.getCore().byId("viewCockpit").getController().connect(data);
	        	}
	        	catch(err){}
	        	});

	        
	        socket.on('wildcard', function(){
	        	try {			
	        			sap.ui.getCore().byId("viewCockpit").getController().wildcard();
	        		}
	        	catch(err){}
	        	});
	        	
        	socket.on('feed', function(data){
       			try {
	        			sap.ui.getCore().byId("viewCockpit").getController().feed(data);
	        		}
	        	catch(err){}
	        	});
		</script>
		<script>
			$(document).ready(function() {
				var gamepad = new Gamepad();
				gamepad.bind(Gamepad.Event.CONNECTED, function(device) {
				});

				
				gamepad.bind(Gamepad.Event.DISCONNECTED, function(device) {
					$('#gamepad-' + device.index).remove();
				});

			
				gamepad.bind(Gamepad.Event.TICK, function(gamepads) {
				});

			
				gamepad.bind(Gamepad.Event.BUTTON_DOWN, function(e) {
					try {
        					sap.ui.getCore().byId("viewCockpit").getController().gamepad_button_down(e);
        			}
        			catch(err){alert('Error');}
				});
		
			
				gamepad.bind(Gamepad.Event.BUTTON_UP, function(e) {
					try {
        					sap.ui.getCore().byId("viewCockpit").getController().gamepad_button_up(e);
        			}
        			catch(err){}
				});

				
				gamepad.bind(Gamepad.Event.AXIS_CHANGED, function(e) {
					try {
        					sap.ui.getCore().byId("viewCockpit").getController().gamepad_axis_changed(e);
        			}
        			catch(err){}
				});

			
				if (!gamepad.init()) {
					alert('Your browser does not support gamepads, get the latest Google Chrome or Firefox.');
				}
			});
		</script>
 			       
	</body>
</html>