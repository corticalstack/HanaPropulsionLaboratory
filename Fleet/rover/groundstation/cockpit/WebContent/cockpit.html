<!DOCTYPE HTML>
<html>
  		<script src="http://192.168.1.62:8090/socket.io/socket.io.js"></script>  
		<script src="/Gamepad/gamepad.js"></script>
              <meta http-equiv="X-UA-Compatible" content="IE=edge">


       	 
  			 
       <head>
   			  <script src="/sap/ui5/1/resources/sap-ui-core.js"
                      id="sap-ui-bootstrap"
                      data-sap-ui-libs="sap.ui.ux3,sap.ui.commons,sap.viz"
                      data-sap-ui-theme="sap_goldreflection" >
              </script>              
              <!-- add sap.ui.table,sap.ui.ux3 and/or other libraries to 'data-sap-ui-libs' if required -->
  			  <script type="text/javascript" src="./cockpit_ui_resources/global.js" ></script> 
   			  <script>   			 		 
			         sap.ui.localResources("cockpit_ui_resources");
                     var view = sap.ui.view({id:"iddefault", viewName:"cockpit_ui_resources.default", type:sap.ui.core.mvc.ViewType.JS});
   			         view.placeAt("content");     			         
   			  </script>
   			 
  
       </head>
      <body class="sapUiBody" role="application">
              <div id="content"></div>
              <script type="text/javascript">
              </script>    			  
  		 <script type="text/javascript">
	        	socket = io.connect('http://192.168.1.62:8090');
	        	socket.on('connect', function(data){
	        		try {	        			
	        			sap.ui.getCore().byId("cockpit_view").getController().connect(data);
	        			
	        		}
	        		catch(err){}
	        	});

	        	socket.on('wildcard', function(){
	        		try {
	        			sap.ui.getCore().byId("cockpit_view").getController().wildcard();
	        			
	        		}
	        		catch(err){}
	        	});
	        	
	        	socket.on('feed', function(data){
	        		try {
	        			sap.ui.getCore().byId("cockpit_view").getController().feed(data);
	        			
	        		}
	        		catch(err){}
	        	});

		</script>
		<script>
		$(document).ready(function() {
			var gamepad = new Gamepad();

			gamepad.bind(Gamepad.Event.CONNECTED, function(device) {
				console.log('Connected', device);

				$('#gamepads').append('<li id="gamepad-' + device.index + '"><h1>Gamepad #' + device.index + ': &quot;' + device.id + '&quot;</h1></li>');
			
				var mainWrap = $('#gamepad-' + device.index),
					statesWrap,
					logWrap,
					control,
					value,
					i	;
			
				mainWrap.append('<strong>State</strong><ul id="states-' + device.index + '"></ul>');
				mainWrap.append('<strong>Events</strong><ul id="log-' + device.index + '"></ul>');

				statesWrap = $('#states-' + device.index)
				logWrap = $('#log-' + device.index)

				for (control in device.state) {
					value = device.state[control];
				
					statesWrap.append('<li>' + control + ': <span id="state-' + device.index + '-' + control + '">' + value + '</span></li>');
				}
				for (i = 0; i < device.buttons.length; i++) {
					value = device.buttons[i];
					statesWrap.append('<li>Raw Button ' + i + ': <span id="button-' + device.index + '-' + i + '">' + value + '</span></li>');
				}
				for (i = 0; i < device.axes.length; i++) {
					value = device.axes[i];
					statesWrap.append('<li>Raw Axis ' + i + ': <span id="axis-' + device.index + '-' + i + '">' + value + '</span></li>');
				}
			
				$('#connect-notice').hide();
			});

			gamepad.bind(Gamepad.Event.DISCONNECTED, function(device) {
				console.log('Disconnected', device);
			
				$('#gamepad-' + device.index).remove();
			
				if (gamepad.count() == 0) {
					$('#connect-notice').show();
				}
			});

			gamepad.bind(Gamepad.Event.TICK, function(gamepads) {
				var gamepad,
					wrap,
					control,
					value,
					i,
					j;
			
				for (i = 0; i < gamepads.length; i++) {
					gamepad = gamepads[i];
					wrap = $('#gamepad-' + i);

					if (gamepad) {
						for (control in gamepad.state) {
							value = gamepad.state[control];
							console.log(value);

							$('#state-' + gamepad.index + '-' + control + '').html(value);
						}
						for (j = 0; j < gamepad.buttons.length; j++) {
							value = gamepad.buttons[j];
							console.log(value);

							$('#button-' + gamepad.index + '-' + j + '').html(value);
						}
						for (j = 0; j < gamepad.axes.length; j++) {
							value = gamepad.axes[j];
							console.log(value);

							$('#axis-' + gamepad.index + '-' + j + '').html(value);
						}
					}
				}
			});

			gamepad.bind(Gamepad.Event.BUTTON_DOWN, function(e) {
				$('#log-' + e.gamepad.index).append('<li>' + e.control + ' down</li>');
				console.log(e.control);
			});
		
			gamepad.bind(Gamepad.Event.BUTTON_UP, function(e) {
				$('#log-' + e.gamepad.index).append('<li>' + e.control + ' up</li>');
				console.log(e.control);
			});

			gamepad.bind(Gamepad.Event.AXIS_CHANGED, function(e) {
				$('#log-' + e.gamepad.index).append('<li>' + e.axis + ' changed to ' + e.value + '</li>');
				console.log(e.control);
			});

			if (!gamepad.init()) {
				alert('Your browser does not support gamepads, get the latest Google Chrome or Firefox.');
			}
		});
		</script>
  			       
       </body>
</html>